<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TripMate - Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <header>
        <div class="logo">üí∏ TripMate</div>
        <button class="logout-btn" onclick="openLogoutModal()">‚Ü∑ Logout</button>
    </header>

    <main class="dashboard">
        <aside class="profile-card">
            <div class="profile-photo-container">
                <img src="images/default-avatar.png" alt="Profile" class="avatar" id="profilePhoto">
                <button class="change-photo-btn" onclick="document.getElementById('photoInput').click()">
                    <i class="fas fa-camera"></i>
                </button>
                <input type="file" id="photoInput" accept="image/*" style="display: none">
            </div>
            <div class="profile-info">
                <h2 id="userName">User</h2>
                <p id="userUsername">@username</p>
                <button class="btn-edit-profile" onclick="openEditProfileModal()">
                    <i class="fas fa-edit"></i> Edit Profile
                </button>
            </div>
            <p id="userEmail">user@example.com</p>

            <div class="info-box friends">
                üë• Friends <span>0</span>
            </div>
            <div class="info-box trips">
                üìç Trips <span>0</span>
            </div>

            <button class="btn invite" onclick="openInviteModal()">+ Invite Friend</button>
            <button class="btn requests" onclick="openRequestsModal()">üë• Friend Requests</button>
            <button class="btn create" onclick="openCreateTripModal()">+ Create Trip</button>
        </aside>

        <section class="trips-section">
            <div class="trip-block">
                <h3>üü¢ Current Trips (<span id="currentTripsCount">0</span>)</h3>
                <div id="currentTrips" class="trips-container">
                </div>
            </div>

            <div class="trip-block">
                <h3>üîµ Past Trips (<span id="pastTripsCount">0</span>)</h3>
                <div id="pastTrips" class="trips-container">
                </div>
            </div>
        </section>
    </main>

    <div id="inviteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeInviteModal()">√ó</span>
            <h2>Invite Friend</h2>
            <form id="inviteForm">
                <div class="form-group">
                    <label for="friendEmail">Friend's Email:</label>
                    <input type="email" id="friendEmail" required placeholder="Enter friend's email">
                </div>
                <button type="submit" class="btn">Send Invitation</button>
            </form>
        </div>
    </div>

    <div id="createTripModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCreateTripModal()">√ó</span>
            <h2>Create New Trip</h2>
            <form id="createTripForm">
                <div class="form-group">
                    <label for="tripName">Trip Name:</label>
                    <input type="text" id="tripName" required placeholder="Enter trip name">
                </div>
                <div class="form-group">
                    <label for="tripLocation">Location:</label>
                    <input type="text" id="tripLocation" required placeholder="Enter trip location">
                </div>
                <div class="form-group">
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" required>
                </div>
                <div class="form-group">
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate" required>
                </div>
                <button type="submit" class="btn">Create Trip</button>
            </form>
        </div>
    </div>

    <div id="changePhotoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeChangePhotoModal()">√ó</span>
            <h2>Change Profile Photo</h2>
            <form id="changePhotoForm">
                <div class="form-group">
                    <label for="photoFile">Choose Photo:</label>
                    <input type="file" id="photoFile" accept="image/*" style="display:none;">
                     <p>A preview will be shown below. Click 'Update Photo' to save.</p>
                </div>
                <div class="preview-container">
                    <img id="photoPreview" src="" alt="Preview" style="display: none;">
                </div>
                <div class="photo-actions">
                    <button type="submit" class="btn-primary">Update Photo</button>
                </div>
            </form>
        </div>
    </div>

    <div id="logoutModal" class="modal">
        <div class="modal-content alert-modal">
            <h2>Logout Confirmation</h2>
            <p>Are you sure you want to logout?</p>
            <div class="alert-actions">
                <button class="btn btn-secondary" onclick="closeLogoutModal()">No, Stay</button>
                <button class="btn btn-danger" onclick="confirmLogout()">Yes, Logout</button>
            </div>
        </div>
    </div>

    <div id="requestsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRequestsModal()">√ó</span>
            <h2>Friend Requests</h2>
            <div id="requestsList" class="requests-list">
            </div>
        </div>
    </div>

    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditProfileModal()">√ó</span>
            <h2>Edit Profile</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editName">Full Name</label>
                    <input type="text" id="editName" required>
                </div>
                <div class="form-group">
                    <label for="editUsername">Username</label>
                    <div class="username-input">
                        <span class="username-prefix">@</span>
                        <input type="text" id="editUsername" required>
                    </div>
                    <button type="button" class="btn-secondary" onclick="randomizeUsername()">
                        <i class="fas fa-random"></i> Generate Random
                    </button>
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>
    </div>
    
    <script type="module" src="scripts/dashboard.js"></script>
</body>

</html>